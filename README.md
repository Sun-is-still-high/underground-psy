# Underground Psy - PHP MVC Application

ะะตะบะพะผะผะตััะตัะบะฐั ะฟะปะฐััะพัะผะฐ ะดะปั ัะฒัะทะธ ะบะปะธะตะฝัะพะฒ ั ะฝะฐัะธะฝะฐััะธะผะธ ะฟัะธัะพะปะพะณะฐะผะธ. MVP ะฒะตััะธั ั ัะตะณะธัััะฐัะธะตะน ะธ ะฐะฒัะพัะธะทะฐัะธะตะน.

## ๐ ะขะตัะฝะพะปะพะณะธะธ

- **Backend:** PHP 7.4+ (ะฑะตะท ััะตะนะผะฒะพัะบะพะฒ)
- **Database:** MySQL 5.7+
- **Architecture:** MVC (Model-View-Controller)
- **ะััะตะฝัะธัะธะบะฐัะธั:** PHP Sessions + bcrypt

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
underground-psy/
โโโ public/              # ะขะพัะบะฐ ะฒัะพะดะฐ (DocumentRoot)
โ   โโโ index.php       # Front Controller
โ   โโโ .htaccess       # URL rewriting
โ   โโโ css/            # ะกัะธะปะธ
โโโ app/
โ   โโโ Controllers/    # ะะพะฝััะพะปะปะตัั
โ   โโโ Models/         # ะะพะดะตะปะธ ะดะฐะฝะฝัั
โ   โโโ Views/          # ะจะฐะฑะปะพะฝั (PHP)
โโโ core/               # MVC ัะดัะพ
โ   โโโ Router.php
โ   โโโ Database.php
โ   โโโ Controller.php
โ   โโโ Model.php
โ   โโโ View.php
โ   โโโ Session.php
โ   โโโ Request.php
โ   โโโ bootstrap.php
โโโ config/             # ะะพะฝัะธะณััะฐัะธั
โ   โโโ database.php
โ   โโโ app.php
โ   โโโ routes.php
โโโ storage/            # ะะพะณะธ ะธ ะทะฐะณััะทะบะธ
```

## โ๏ธ ะฃััะฐะฝะพะฒะบะฐ

### 1. ะขัะตะฑะพะฒะฐะฝะธั

- PHP 7.4 ะธะปะธ ะฒััะต
- MySQL 5.7 ะธะปะธ ะฒััะต
- Apache ั mod_rewrite (ะธะปะธ Nginx)
- OSPanel / XAMPP / MAMP (ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ)

### 2. ะะฐัััะพะนะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั

1. ะกะพะทะดะฐะนัะต ะฑะฐะทั ะดะฐะฝะฝัั ะธ ะธะผะฟะพััะธััะนัะต ััะตะผั:

```bash
mysql -u root -p < database.sql
```

ะะปะธ ัะตัะตะท phpMyAdmin:
- ะกะพะทะดะฐะนัะต ะะ `underground_psy`
- ะะผะฟะพััะธััะนัะต ัะฐะนะป `database.sql`

2. ะะฐัััะพะนัะต ะฟะฐัะฐะผะตััั ะฟะพะดะบะปััะตะฝะธั ะฒ `config/database.php`:

```php
return [
    'host' => 'localhost',
    'port' => '3306',
    'database' => 'underground_psy',
    'username' => 'root',
    'password' => '',  // ะะฐั ะฟะฐัะพะปั MySQL
    'charset' => 'utf8mb4',
];
```

### 3. ะะฐัััะพะนะบะฐ ะฒะตะฑ-ัะตัะฒะตัะฐ

#### Apache (OSPanel/XAMPP)

1. ะฃะฑะตะดะธัะตัั, ััะพ `mod_rewrite` ะฒะบะปััะตะฝ
2. ะฃััะฐะฝะพะฒะธัะต DocumentRoot ะฝะฐ ะฟะฐะฟะบั `public/`
3. ะคะฐะนะป `.htaccess` ัะถะต ะฝะฐัััะพะตะฝ

ะะปั OSPanel:
- ะะฐะทะผะตััะธัะต ะฟัะพะตะบั ะฒ `OSPanel/domains/underground-psy/`
- DocumentRoot ะดะพะปะถะตะฝ ัะบะฐะทัะฒะฐัั ะฝะฐ `underground-psy/public/`

#### Nginx

```nginx
server {
    listen 80;
    server_name underground-psy.local;
    root /path/to/underground-psy/public;
    index index.php;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }
}
```

### 4. ะัะฐะฒะฐ ะดะพัััะฟะฐ (Linux)

```bash
chmod -R 755 storage/
chmod -R 755 public/
```

## ๐ฏ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะพัััะฟะฝัะต ะผะฐัััััั

| ะะตัะพะด | URI | ะะฟะธัะฐะฝะธะต |
|-------|-----|----------|
| GET | `/` | ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ |
| GET | `/login` | ะคะพัะผะฐ ะฒัะพะดะฐ |
| POST | `/login` | ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดะฐ |
| GET | `/register` | ะคะพัะผะฐ ัะตะณะธัััะฐัะธะธ |
| POST | `/register` | ะะฑัะฐะฑะพัะบะฐ ัะตะณะธัััะฐัะธะธ |
| POST | `/logout` | ะััะพะด ะธะท ัะธััะตะผั |
| GET | `/dashboard` | ะะธัะฝัะน ะบะฐะฑะธะฝะตั (ะทะฐัะธัะตะฝ) |

### ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

- **CLIENT** - ะะปะธะตะฝั (ะฟะพ ัะผะพะปัะฐะฝะธั)
- **PSYCHOLOGIST** - ะัะธัะพะปะพะณ
- **ADMIN** - ะะดะผะธะฝะธัััะฐัะพั

### ะขะตััะพะฒัะต ะดะฐะฝะฝัะต

ะั ะผะพะถะตัะต ัะพะทะดะฐัั ัะตััะพะฒัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะตัะตะท ัะตะณะธัััะฐัะธั ะธะปะธ ัะฐัะบะพะผะผะตะฝัะธัะพะฒะฐัั INSERT ะฒ `database.sql`:

- **Email:** client@test.com
  **ะะฐัะพะปั:** password123
  **ะะพะปั:** CLIENT

- **Email:** psychologist@test.com
  **ะะฐัะพะปั:** password123
  **ะะพะปั:** PSYCHOLOGIST

## ๐๏ธ ะััะธัะตะบัััะฐ

### Front Controller Pattern

ะัะต ะทะฐะฟัะพัั ะฟัะพัะพะดัั ัะตัะตะท `public/index.php`:

```
ะะพะปัะทะพะฒะฐัะตะปั โ .htaccess โ index.php โ Router โ Controller โ View
```

### ะะฐะบ ัะฐะฑะพัะฐะตั ะผะฐัััััะธะทะฐัะธั

1. `.htaccess` ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ะฒัะต ะทะฐะฟัะพัั ะฝะฐ `index.php`
2. `Router` ัะธัะฐะตั `config/routes.php`
3. ะะฐัะพะดะธั ัะพะฒะฟะฐะดะตะฝะธะต URI ะธ ะฒัะทัะฒะฐะตั ะบะพะฝััะพะปะปะตั
4. ะะพะฝััะพะปะปะตั ะพะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะฟัะพั ะธ ัะตะฝะดะตัะธั view

### ะัะธะผะตั ะดะพะฑะฐะฒะปะตะฝะธั ะผะฐัััััะฐ

`config/routes.php`:
```php
['method' => 'GET', 'uri' => '/about', 'action' => 'PageController@about']
```

### ะัะธะผะตั ะบะพะฝััะพะปะปะตัะฐ

```php
<?php
namespace App\Controllers;

use Core\Controller;

class PageController extends Controller
{
    public function about(): void
    {
        $this->view('pages/about', [
            'title' => 'ะ ะฝะฐั'
        ]);
    }
}
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ ะะฐัะพะปะธ ัะตัะธัััััั ัะตัะตะท `password_hash()` (bcrypt)
- โ SQL-ะธะฝัะตะบัะธะธ ะทะฐัะธัะตะฝั ัะตัะตะท PDO prepared statements
- โ XSS ะทะฐัะธัะฐ ัะตัะตะท `htmlspecialchars()` ะฒ views
- โ CSRF ัะพะบะตะฝั (TODO: ะฑัะดัั ะดะพะฑะฐะฒะปะตะฝั)
- โ ะะฐะปะธะดะฐัะธั email ัะตัะตะท `filter_var()`

## ๐ TODO / ะกะปะตะดัััะธะต ัะฐะณะธ

- [ ] CSRF ะทะฐัะธัะฐ ะดะปั ัะพัะผ
- [ ] ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะฟะฐัะพะปั
- [ ] Email ะฒะตัะธัะธะบะฐัะธั
- [ ] ะัะพัะธะปะธ ะฟัะธัะพะปะพะณะพะฒ
- [ ] ะกะธััะตะผะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั
- [ ] ะะดะผะธะฝ-ะฟะฐะฝะตะปั
- [ ] API endpoints

## ๐ ะัะปะฐะดะบะฐ

ะะบะปััะธัะต ัะตะถะธะผ ะพัะปะฐะดะบะธ ะฒ `config/app.php`:

```php
'debug' => true,
```

ะะพะณะธ ะพัะธะฑะพะบ ะฑัะดัั ะพัะพะฑัะฐะถะฐัััั ะฝะฐ ัััะฐะฝะธัะต.

## ๐ ะะธัะตะฝะทะธั

ะะตะบะพะผะผะตััะตัะบะธะน ะฟัะพะตะบั ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝัั ัะตะปะตะน.

## ๐จโ๐ป ะะฐะทัะฐะฑะพัะบะฐ

ะกะพะทะดะฐะฝะพ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะธััะพะณะพ PHP ะฒ MVC ะฐััะธัะตะบัััะต ะฑะตะท ััะตะนะผะฒะพัะบะพะฒ.

---

**ะัะธะผะตัะฐะฝะธะต:** ะญัะพ MVP ะฒะตััะธั ั ะฑะฐะทะพะฒะพะน ะฐััะตะฝัะธัะธะบะฐัะธะตะน. ะคัะฝะบัะธะพะฝะฐะป ะฑัะพะฝะธัะพะฒะฐะฝะธั ัะตะฐะฝัะพะฒ ะธ ัะฟัะฐะฒะปะตะฝะธั ัะฐัะฟะธัะฐะฝะธะตะผ ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝ ะฒ ัะปะตะดัััะธั ะฒะตััะธัั.
